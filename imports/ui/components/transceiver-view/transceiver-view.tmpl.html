<div layout="column" class="overlay-10">
    <md-card>
        <md-card-content layout="column">
            <md-progress-linear class="scesPadding" md-mode="indeterminate"></md-progress-linear>
            <md-input-container style="margin-top:20px">
                <label>Scan barcode</label>
                <input type="text" id="allScanTrans" ng-model="tr" ng-keypress="onKeyPressed($event)">
            </md-input-container>
            <div layout-sm="column" layout="row" layout-align="start start">
                <md-radio-group ng-model="grouping" layout="row" ng-change="changeGrouping(grouping)" flex="100">
                    <md-radio-button value="errorCheck" class="md-primary">Error check</md-radio-button>
                    <md-radio-button value="eyeImages">Eye Images</md-radio-button>
                    <md-radio-button value="testData">Test data</md-radio-button>
                    <md-radio-button value="sensitivityCharts">Sensitivity charts</md-radio-button>
                </md-radio-group>
            </div>
        </md-card-content>
    </md-card>
    <md-subheader class="md-no-sticky" ng-show="grouping === 'errorCheck'">Scanned transceivers (Newest on top)
    </md-subheader>
    <div ng-repeat="scan in scans" layout="column" ng-show="grouping === 'errorCheck'">
        <div layout="row">
            <md-card style="background:#EEEEEE;" flex="80">
                <md-card-header>
                    <md-card-header-text style="padding-left:15px;font-size:16px;font-weight:700;"><a
                            href="/sces/transceiver?id={{scan.data[0].sn || scan.c}}">{{scan.data[0].sn || scan.c}}</a>
                        <span class="trans_status">{{scan.pnum}}</span>
                    </md-card-header-text>
                </md-card-header>
                <md-card-content ng-if="scan.msg" style="padding:-10px;margin-top:-15px;margin-bottom:-15px;">
                    <span class="meas_status_{{scan.s}}">{{scan.msg}}</span>
                </md-card-content>
                <md-card-content ng-if="!scan.msg" ng-repeat="test in scan.data"
                                 style="padding:-10px;margin-top:-15px;margin-bottom:-15px;">
                    <span class="meas_status_{{test.s}}">{{test.t}} {{test.st}} {{test.param || ''}}</span> <span
                        class="trans_status">{{test.d | date:'MM/dd/yyyy hh:mm:ss'}} Meas: {{test.s}}
                    Ind: {{test.r}}</span>
                </md-card-content>
            </md-card>
            <div style="text-align:right;font-size:45px;font-weight:700;">{{scan.rework}}
            </div>
        </div>
    </div>
    <md-subheader class="md-no-sticky" ng-show="grouping === 'eyeImages'">Eye images for {{code}}</md-subheader>
    <md-progress-circular md-mode="indeterminate" ng-show="showProgress"></md-progress-circular>
    <md-grid-list flex="" md_cols-gt-lg="2" md_cols-gt-md="2" md-cols-gt-sm="1" cols-xs="1" md-gutter="35px"
                  md-row-height="550px" ng-show="grouping === 'eyeImages'">
        <md-grid-tile data-ng-repeat="eye in eyeImages">
            <div layout="column">
                <div style="text-align:left;font-size:11px;font-weight:500;padding-left:20px;">
                    {{eye.fileName.replace('TxEye_', '')}}
                </div>
                <div>
                    <img alt="{{eye.fileName}}" src="{{eye.content}}"/>
                </div>
            </div>
        </md-grid-tile>
    </md-grid-list>
    <md-subheader class="md-no-sticky" ng-show="grouping === 'testData'">Test data for {{code}}</md-subheader>
    <md-content layout="row" ng-show="grouping === 'testData'" style="height:800px;">
        <div flex="60" style="overflow:scroll">
            <md-card ng-repeat="(key, data) in testdata">
                <md-card-header-text layout-padding>
                    <span style="font-size:14px;">Meas ID '{{key}}'</span>
                </md-card-header-text>
                <md-card-content>
                    <div ng-repeat="obj in data" style="font-size:11px;padding-left:25px;">
                        <span class="meas_status_{{obj.status}}">Status: {{obj.status}}  Meas: {{obj.measstatus}}
                            Ind: {{obj.result}}</span>
                        {{obj.timestamp | date:'MM/dd/yyyy HH:mm:ss'}} {{obj.type}} {{obj.subtype}} -
                        <md-button md-no-ink="" class="md-primary btn-view-data" ng-click="select(obj)">view data
                        </md-button>
                    </div>
                </md-card-content>
            </md-card>
        </div>
        <div flex="40">
            <md-card style="height:800px;">
                <md-card-title layout-padding>
                    <md-card-title-text>
                        <span style="font-size:14px;">{{selected._id}}</span>
                    </md-card-title-text>
                </md-card-title>
                <md-card-content ng-repeat="(key, value) in selected"
                                 style="font-size:11px;padding-left:25px;margin-top:-15px;margin-bottom:-15px;">
                  <span ng-if="['data','meta','device'].indexOf(key) >= 0">
                      <b>{{key}}</b><br/>
                      <span ng-repeat="(key2, value2) in value">
                         <span style="font-size:11px;padding-left:65px;margin-top:-15px;margin-bottom:-15px;">{{key2}}
                             : {{value2}}</span><br/>
                      </span>
                  </span>
                    <span ng-if="['data','meta','device'].indexOf(key) === -1">
                    <span>{{key}}</span>: {{value}}
                  </span>
                </md-card-content>
            </md-card>
        </div>
    </md-content>
    <md-subheader class="md-no-sticky" ng-show="grouping === 'sensitivityCharts'">Sensitivity charts for {{code}}
    </md-subheader>
    <md-content layout="row" ng-show="grouping === 'sensitivityCharts'" style="height:800px;">
        <md-grid-list flex md-cols-sm="1" md-cols-md="2" md-cols-gt-md="4" md-row-height="300px" md-gutter="5px">
            <md-grid-tile md-colspan="1" data-ng-repeat="sensChart in sensCharts">
                <div id="sens{{sensChart._id}}" class="chartContainer"></div>
            </md-grid-tile>
        </md-grid-list>
    </md-content>
</div>
